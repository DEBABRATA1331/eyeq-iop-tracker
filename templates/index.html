<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Welcome â€“ Eye-Q IOP Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- GSAP -->
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/ScrollTrigger.min.js"></script>

  <style>
    body {
      background: linear-gradient(135deg, #f0f4ff, #dce3f0);
      transition: background 0.4s, color 0.4s;
      font-family: 'Segoe UI', sans-serif;
    }

    .dark-mode {
      background: linear-gradient(135deg, #0e1117, #1e2430);
      color: #f5f5f5;
    }

    .dark-mode .welcome-box {
      background: #1b2230;
      color: #e0e0e0;
    }

    .dark-mode .text-muted {
      color: #bbb !important;
    }

    .dark-mode .btn-outline-dark {
      color: #fff;
      border-color: #bbb;
    }

    .dark-mode .btn-outline-dark:hover {
      background-color: #444;
    }

    .dark-mode-toggle {
      position: absolute;
      top: 15px;
      right: 20px;
      z-index: 1000;
    }

    .welcome-box {
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.1);
      padding: 2.5rem;
      margin-top: 1.5rem;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
    }

    .logo-circle {
      width: 80px;
      height: 80px;
      background: #0d6efd;
      border-radius: 50%;
      margin: 0 auto 1rem auto;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      font-weight: bold;
      color: white;
      letter-spacing: 1px;
    }

    .carousel-item {
      text-align: center;
      padding: 2rem 1rem;
    }

    iframe {
      width: 100%;
      border-radius: 12px;
      margin-top: 1.5rem;
      height: 320px;
    }

    .partner-logo {
      height: 40px;
      margin: 0 10px;
      opacity: 0.85;
      transition: opacity 0.3s;
    }

    .partner-logo:hover {
      opacity: 1;
    }

    /* Typewriter effect */
    .typewriter {
      border-right: 3px solid #0d6efd;
      white-space: nowrap;
      overflow: hidden;
      display: inline-block;
      opacity: 0; /* hidden until animation starts */
    }
  </style>
</head>
<body>

<!-- Dark Mode Toggle -->
<div class="dark-mode-toggle">
  <button class="btn btn-sm btn-outline-dark" onclick="toggleDarkMode()">Toggle Dark Mode</button>
</div>

<div class="container">
  <!-- Onboarding Carousel -->
  <div id="onboardingCarousel" class="carousel slide mb-5 mt-4" data-bs-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <h4 class="typewriter">Welcome to Eye-Q</h4>
        <p>Track your intraocular pressure (IOP) conveniently from home.</p>
      </div>
      <div class="carousel-item">
        <h4 class="typewriter">Real-Time Eye Insights</h4>
        <p>Stay updated with IOP, screen time, and blue light exposure alerts.</p>
      </div>
      <div class="carousel-item">
        <h4 class="typewriter">Instant Recommendations</h4>
        <p>Find nearby hospitals and access your reports instantly.</p>
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#onboardingCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#onboardingCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>

  <!-- Main Welcome Card -->
  <div class="welcome-box text-center" id="mainBox">
    <!-- Eye-Q Logo -->
    <img src="{{ url_for('static', filename='EYE_Q_LOGO.png') }}" 
     alt="Eye-Q Logo" 
     style="height: 80px; margin-bottom: 40px;">
    <h2 class="text-primary mb-2 typewriter main-heading">Your AI-Powered Eye Health Partner</h2>
    <p class="text-muted">Accurate, real-time IOP monitoring and preventive eye health insights.</p>

    <ul class="list-unstyled mt-4">
      <li>Live IOP & Eye Metrics</li>
      <li>Screen Time & Blue Light Alerts</li>
      <li>Detailed Health Reports</li>
      <li>Nearby Hospital Recommendations</li>
    </ul>

    <a href="{{ url_for('login') }}" class="btn btn-primary btn-lg w-100 mt-4">Get Started</a>

    <!-- Demo Video -->
    <h5 class="mt-5 text-secondary">Eye-Q in Action</h5>
    <iframe src="https://www.youtube.com/embed/9geREeE13jc" frameborder="0" allowfullscreen></iframe>

    <!-- Testimonials -->
    <div class="mt-5 text-start">
      <h5 class="text-secondary">What Users Say</h5>
      <blockquote class="blockquote mt-3">
        <p>"Eye-Q makes glaucoma risk tracking effortless."</p>
        <footer class="blockquote-footer">Satarupa, Bhubaneswar</footer>
      </blockquote>
      <blockquote class="blockquote mt-3">
        <p>"The screen time alerts have improved my daily habits."</p>
        <footer class="blockquote-footer">Bhavitaya, Chennai</footer>
      </blockquote>

      <h6 class="mt-4">Trusted By:</h6>
      <div class="d-flex align-items-center">
        <img src="{{ url_for('static', filename='IEEE LOGO VSSUT.jpg') }}" 
         class="partner-logo" 
         alt="IEEE Logo" 
         style="height: 50px; margin-left: 10px;">
      </div>
    </div>
  </div>
</div>

<!-- Scripts -->
<script>
  gsap.registerPlugin(ScrollTrigger);

  // Box fade-in on scroll
  gsap.from("#mainBox", {
    opacity: 0,
    y: 60,
    duration: 1.2,
    ease: "power3.out",
    scrollTrigger: "#mainBox"
  });

  function toggleDarkMode() {
    document.body.classList.toggle("dark-mode");
    localStorage.setItem('theme', document.body.classList.contains("dark-mode") ? 'dark' : 'light');
  }

  // Restore theme
  if (localStorage.getItem('theme') === 'dark') {
    document.body.classList.add("dark-mode");
  }

  // Typewriter effect
  function typeWriterEffect(element, text, speed = 100, callback = null) {
    let index = 0;
    function type() {
      if (index < text.length) {
        element.textContent += text.charAt(index);
        index++;
        setTimeout(type, speed);
      } else {
        element.style.borderRight = "none";
        if (callback) callback();
      }
    }
    type();
  }

  window.addEventListener("load", () => {
    const mainHeading = document.querySelector(".main-heading");
    const carouselHeadings = document.querySelectorAll(".carousel-item .typewriter");

    function runSequentially(elements, i = 0) {
      if (i < elements.length) {
        const el = elements[i];
        const fullText = el.textContent.trim();
        el.textContent = "";
        gsap.to(el, { opacity: 1, duration: 0.5, onComplete: () => {
          typeWriterEffect(el, fullText, 100, () => {
            setTimeout(() => runSequentially(elements, i + 1), 500);
          });
        }});
      }
    }

    // Animate main heading first
    const fullMainText = mainHeading.textContent.trim();
    mainHeading.textContent = "";
    gsap.to(mainHeading, { opacity: 1, duration: 0.6, onComplete: () => {
      typeWriterEffect(mainHeading, fullMainText, 100, () => {
        setTimeout(() => runSequentially(carouselHeadings), 700);
      });
    }});
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
